<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Bazinga CameraDriver: Dokumentacja klasy BConnection</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Wygenerowano przez Doxygen 1.6.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Strona&nbsp;główna</span></a></li>
      <li class="current"><a href="annotated.html"><span>Klasy</span></a></li>
      <li><a href="files.html"><span>Pliki</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Lista&nbsp;klas</span></a></li>
      <li><a href="functions.html"><span>Składowe&nbsp;klas</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Dokumentacja klasy BConnection</h1><!-- doxytag: class="BConnection" -->
<p>Klasa reprezentujaca polaczenie.  
<a href="#_details">Więcej...</a></p>

<p><code>#include &lt;<a class="el" href="bconnection_8h_source.html">bconnection.h</a>&gt;</code></p>

<p><a href="class_b_connection-members.html">Lista wszystkich składowych.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Sygnały</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_b_connection.html#a90dca3f0343427e31bb4544a8accf56d">connected</a> (quint32 sessid)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Emitowany, gdy serwer wysle info o polaczeniu.  <a href="#a90dca3f0343427e31bb4544a8accf56d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a20fa85863f4cb396d3141e01d4928fd4"></a><!-- doxytag: member="BConnection::disconnected" ref="a20fa85863f4cb396d3141e01d4928fd4" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_b_connection.html#a20fa85863f4cb396d3141e01d4928fd4">disconnected</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Emitowany, gdy serwer wysle informacje o zerwaniu polaczenia. <br/></td></tr>
<tr><td colspan="2"><h2>Metody publiczne</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_b_connection.html#ac9dfcf1eed50d5ac3636cb2256b208e9">BConnection</a> (unsigned char clientType)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Konstruuje obiekt z ustawionym typem klienta.  <a href="#ac9dfcf1eed50d5ac3636cb2256b208e9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_b_connection.html#a5a4985b2a3f559b448ce6660ba353acb">isSessionAlive</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sprawda czy sesja jest aktywna.  <a href="#a5a4985b2a3f559b448ce6660ba353acb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_b_connection.html#aac501a13f453169ed00bc3d4f8664040">connect</a> (const QString &amp;serverAddress, quint16 serverPort, const QString &amp;login, const QString &amp;password, quint16 listeningPort, const QString &amp;token=QString())</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Laczy z serwerem.  <a href="#aac501a13f453169ed00bc3d4f8664040"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_b_connection.html#a9035d3ca3836f1c841e0f91327753f14">disconnectFromHost</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Rozlacz sie z serwerem.  <a href="#a9035d3ca3836f1c841e0f91327753f14"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_b_connection.html#a53b6835b9124709e108913103049910b">sendData</a> (<a class="el" href="class_b_datagram.html">BDatagram</a> &amp;data)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Wysyla przygotowany wczesniej datagram.  <a href="#a53b6835b9124709e108913103049910b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_b_connection.html#a77f411c1ec683bd571f41023609f2e7f">sendData</a> (unsigned char command, QByteArray &amp;data)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Wysyla datagram z danymi.  <a href="#a77f411c1ec683bd571f41023609f2e7f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_b_connection.html#ae6e720ac6a03bd3672ab440eb1e9b8c5">sendData</a> (unsigned char command)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Wysyla pusty datagram.  <a href="#ae6e720ac6a03bd3672ab440eb1e9b8c5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_b_datagram.html">BDatagram</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_b_connection.html#a68fb4ff5ee98e5228378d08a2fe2ae19">getData</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Odbierz datagram od serwera.  <a href="#a68fb4ff5ee98e5228378d08a2fe2ae19"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Opis szczegółowy</h2>
<p>Klasa reprezentujaca polaczenie. </p>
<p>Obiekt po polaczeniu wysyla do serwera okresowo pakiet informujacy, ze jeszcze zyje. Odbieranie informacji wykonuje sie zawsze jawnie odpalajac <a class="el" href="class_b_connection.html#a68fb4ff5ee98e5228378d08a2fe2ae19" title="Odbierz datagram od serwera.">getData()</a>. </p>
<hr/><h2>Dokumentacja konstruktora i destruktora</h2>
<a class="anchor" id="ac9dfcf1eed50d5ac3636cb2256b208e9"></a><!-- doxytag: member="BConnection::BConnection" ref="ac9dfcf1eed50d5ac3636cb2256b208e9" args="(unsigned char clientType)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CLIENTLIBSHARED_EXPORT BConnection::BConnection </td>
          <td>(</td>
          <td class="paramtype">unsigned char&nbsp;</td>
          <td class="paramname"> <em>clientType</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Konstruuje obiekt z ustawionym typem klienta. </p>
<dl><dt><b>Parametry:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>clientType</em>&nbsp;</td><td>B_SOURCE_DRIVER albo B_SOURCE_APP </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/><h2>Dokumentacja funkcji składowych</h2>
<a class="anchor" id="aac501a13f453169ed00bc3d4f8664040"></a><!-- doxytag: member="BConnection::connect" ref="aac501a13f453169ed00bc3d4f8664040" args="(const QString &amp;serverAddress, quint16 serverPort, const QString &amp;login, const QString &amp;password, quint16 listeningPort, const QString &amp;token=QString())" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BConnection::connect </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&nbsp;</td>
          <td class="paramname"> <em>serverAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">quint16&nbsp;</td>
          <td class="paramname"> <em>serverPort</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QString &amp;&nbsp;</td>
          <td class="paramname"> <em>login</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QString &amp;&nbsp;</td>
          <td class="paramname"> <em>password</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">quint16&nbsp;</td>
          <td class="paramname"> <em>listeningPort</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QString &amp;&nbsp;</td>
          <td class="paramname"> <em>token</em> = <code>QString()</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Laczy z serwerem. </p>
<p>Binduje podany port (listeningPort), laczy sie z serwerem na podanym porcie, loguje na podstawie podanych danych (token moze byc pusty i nie podany)</p>
<p>Wysyla serwerowi komunikat SREQ o tresci login:haslo:port:token lub login:haslo:port w zaleznosci od tego, czy token zostal podany.</p>
<dl class="warning"><dt><b>Ostrzeżenie:</b></dt><dd>Nie czeka na potwierdzenie serwera. Trzeba wywolac <a class="el" href="class_b_connection.html#a68fb4ff5ee98e5228378d08a2fe2ae19" title="Odbierz datagram od serwera.">getData()</a>, wtedy, jesli zostanie odebrane od serwera potwierdzenie zalogowania, obiekt polaczenia wyemituje sygnal <a class="el" href="class_b_connection.html#a90dca3f0343427e31bb4544a8accf56d" title="Emitowany, gdy serwer wysle info o polaczeniu.">connected(quint32 sessid)</a>. </dd></dl>
<dl><dt><b>Parametry:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>serverAddress</em>&nbsp;</td><td>adres serwera </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>serverPort</em>&nbsp;</td><td>port serwera </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>login</em>&nbsp;</td><td>login </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>password</em>&nbsp;</td><td>haslo </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>listeningPort</em>&nbsp;</td><td>port na ktorym driver bedzie nasluchiwal potwierdzen z serwera </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>token</em>&nbsp;</td><td>token gry, parametr opcjonalny </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a90dca3f0343427e31bb4544a8accf56d"></a><!-- doxytag: member="BConnection::connected" ref="a90dca3f0343427e31bb4544a8accf56d" args="(quint32 sessid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BConnection::connected </td>
          <td>(</td>
          <td class="paramtype">quint32&nbsp;</td>
          <td class="paramname"> <em>sessid</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [signal]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Emitowany, gdy serwer wysle info o polaczeniu. </p>
<dl><dt><b>Parametry:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sessid</em>&nbsp;</td><td>id sesji </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a9035d3ca3836f1c841e0f91327753f14"></a><!-- doxytag: member="BConnection::disconnectFromHost" ref="a9035d3ca3836f1c841e0f91327753f14" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BConnection::disconnectFromHost </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Rozlacz sie z serwerem. </p>
<p>Wysyla do serwera CLOSE i wylacza nasluchiwanie na porcie lokalnym. </p>

</div>
</div>
<a class="anchor" id="a68fb4ff5ee98e5228378d08a2fe2ae19"></a><!-- doxytag: member="BConnection::getData" ref="a68fb4ff5ee98e5228378d08a2fe2ae19" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_b_datagram.html">BDatagram</a> * BConnection::getData </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Odbierz datagram od serwera. </p>
<p>Metoda wstepnie przetwarza pobrany pakiet. W zaleznosci od jego zawartosci moze: </p>
<ul>
<li>zwrocic datagram. </li>
<li>rzucic wyjatkiem <a class="el" href="class_b_connection_exception.html" title="Klasa opisujaca wyjatek polazenia z serwerem Bazinga.">BConnectionException</a> z zawartoscia pakietu badz nie. </li>
<li>zapisac sobie id sesji, wyemitowac sygnal <a class="el" href="class_b_connection.html#a90dca3f0343427e31bb4544a8accf56d" title="Emitowany, gdy serwer wysle info o polaczeniu.">connected(quint32 sessid)</a> i zwrocic NULL. Od tego momentu zakladane jest, ze polaczenie zostalo nawiazane. </li>
</ul>

</div>
</div>
<a class="anchor" id="a5a4985b2a3f559b448ce6660ba353acb"></a><!-- doxytag: member="BConnection::isSessionAlive" ref="a5a4985b2a3f559b448ce6660ba353acb" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BConnection::isSessionAlive </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sprawda czy sesja jest aktywna. </p>
<p>Technicznie sprowadza sie to do sprawdzenia czy sessid != 0.</p>
<dl class="return"><dt><b>Zwraca:</b></dt><dd>true jesli sesja jest aktywna, false w przeciwnym przypadku. </dd></dl>

</div>
</div>
<a class="anchor" id="ae6e720ac6a03bd3672ab440eb1e9b8c5"></a><!-- doxytag: member="BConnection::sendData" ref="ae6e720ac6a03bd3672ab440eb1e9b8c5" args="(unsigned char command)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BConnection::sendData </td>
          <td>(</td>
          <td class="paramtype">unsigned char&nbsp;</td>
          <td class="paramname"> <em>command</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Wysyla pusty datagram. </p>
<p>jak w <a class="el" href="class_b_connection.html#a77f411c1ec683bd571f41023609f2e7f" title="Wysyla datagram z danymi.">sendData(unsigned char command, QByteArray &amp; data)</a> tylko ze wysyla sam naglowek.</p>
<dl class="return"><dt><b>Zwraca:</b></dt><dd>status jak w QUDPSocket::writeDatagram(); </dd></dl>

</div>
</div>
<a class="anchor" id="a77f411c1ec683bd571f41023609f2e7f"></a><!-- doxytag: member="BConnection::sendData" ref="a77f411c1ec683bd571f41023609f2e7f" args="(unsigned char command, QByteArray &amp;data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BConnection::sendData </td>
          <td>(</td>
          <td class="paramtype">unsigned char&nbsp;</td>
          <td class="paramname"> <em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QByteArray &amp;&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Wysyla datagram z danymi. </p>
<p>Ustawia odpowiednio pole command i dane. Reszta jest pobierana z wlasciwosci tego obiektu.</p>
<dl class="return"><dt><b>Zwraca:</b></dt><dd>status jak w QUDPSocket::writeDatagram(); </dd></dl>

</div>
</div>
<a class="anchor" id="a53b6835b9124709e108913103049910b"></a><!-- doxytag: member="BConnection::sendData" ref="a53b6835b9124709e108913103049910b" args="(BDatagram &amp;data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BConnection::sendData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_b_datagram.html">BDatagram</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>data</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Wysyla przygotowany wczesniej datagram. </p>
<dl class="return"><dt><b>Zwraca:</b></dt><dd>status jak w QUDPSocket::writeDatagram(); </dd></dl>

</div>
</div>
<hr/>Dokumentacja dla tej klasy została wygenerowana z plików:<ul>
<li><a class="el" href="bconnection_8h_source.html">bconnection.h</a></li>
<li>bconnection.cpp</li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Wygenerowano przez&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.2 </small></address>
</body>
</html>
